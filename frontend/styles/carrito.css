/* === Woof & Barf 췅 Carrito animado ===
   - Estilo claro tipo confirmaci칩n con acentos c치lidos
   - Micro-interacciones (hover, elevaci칩n, brillos)
   - Animaciones: rise, pulse, bounce, shimmer
   - Sin cambiar HTML
*/
:root{
  --brand-ink: #111;          /* texto principal */
  --brand-accent: #7a4a29;    /* acento Woof&Barf */
  --brand-accent-2: #c77a43;  /* acento claro */
  --brand-100: #f8efe9;       /* fondo c치lido */
  --ok: #2fbf71;
  --warn: #e0a800;
  --danger: #e03131;

  --bs-primary: var(--brand-accent);
  --bs-primary-rgb: 122,74,41;
}

/* ---------- Reset suave + tipograf칤a ---------- */
*{ box-sizing:border-box; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  color: #f2f4ef;
  background:
    url('../assets/imagenes/perritos-varios/fondo-web.png') no-repeat center center fixed, /* 游녣 Imagen fija */
    radial-gradient(1200px 600px at 10% -10%, color-mix(in srgb, var(--bs-primary) 18%, transparent), transparent 60%),
    radial-gradient(900px 500px at 90% 0%, color-mix(in srgb, var(--bs-secondary) 18%, transparent), transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  background-size: cover; /* Ajusta la imagen al tama침o del viewport */
  overflow-x: hidden;
}


/* Scrollbar */
::-webkit-scrollbar{ height:10px; width:10px; }
::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--bs-secondary), var(--bs-primary));
  border-radius:999px;
}
::-webkit-scrollbar-track{ background:rgba(255,255,255,.04); }

/* =================== Layout base =================== */

/* Contador autom치tico de items (fallback visual; el JS ya actualiza badge con cantidades) */
.contenedor-carrito{ counter-reset:cartItems; }
.carrito-productos .producto-item{ counter-increment:cartItems; }

/* Barra retorno + t칤tulo */
.nav-retorno{
  position:sticky; top:0; z-index:30;
  display:flex; align-items:center; gap:1rem;
  padding:1.25rem 1.5rem;
  background:linear-gradient(180deg, rgba(31,31,31,.95), rgba(31,31,31,.5));
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--stroke);
  animation:dropFade .5s ease both;
}
.btn-regresar{
  display:inline-flex; align-items:center; gap:.5rem;
  text-decoration:none; color:var(--bs-info);
  font-weight:600;
  padding:.5rem .75rem; border:1px solid var(--stroke);
  border-radius:.75rem; transition:.25s ease;
}
.btn-regresar:hover{
  color:var(--brand-dark); background:var(--bs-info);
  box-shadow:var(--glow); transform:translateY(-1px);
}
.titulo-pagina{
  font-family: 'Fredoka','Roboto',sans-serif;
  letter-spacing:.2px;
}

/* ---------- Animaciones base ---------- */
@keyframes rise{ from{transform:translateY(6px);opacity:0} to{transform:none;opacity:1} }
@keyframes pulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.06)} }
@keyframes bounce{ 0%{transform:scale(1)} 40%{transform:scale(1.13)} 100%{transform:scale(1)} }
@keyframes shine{ 0%{background-position:-200% 0} 100%{background-position:200% 0} }
@keyframes shimmer{ 0%{background-position:-450px 0} 100%{background-position:450px 0} }
@keyframes fadein{ from{opacity:0} to{opacity:1} }

/* Entrada suave del main */
.fade-in{ animation: fadein .28s ease both; }

/* ---------- Cards y elevaci칩n ---------- */
.card{
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 14px;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  will-change: transform;
}
.card:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 28px rgba(0,0,0,.08);
  border-color: rgba(0,0,0,.10);
}

.card-empty{
  background: linear-gradient(180deg, #fff, var(--brand-100));
}

/* Borde superior animado para cards destacadas (resumen) */
.resumen-card{
  top: 90px; /* sticky */
  position: sticky;
}
.resumen-card .card-body{
  position: relative;
  isolation: isolate;
}
.resumen-card .card-body::before{
  content:"";
  position:absolute; inset: -1px -1px auto -1px; height:4px; border-top-left-radius:14px; border-top-right-radius:14px;
  background: linear-gradient(90deg, var(--brand-accent), var(--brand-accent-2), var(--brand-accent));
  background-size: 200% 100%;
  animation: shine 3.5s linear infinite;
  z-index:-1;
}

/* ---------- Lista de items ---------- */
.item{
  display:grid;
  grid-template-columns: 96px 1fr auto;
  grid-template-areas:
    "img info qty"
    "img info act";
  gap: 12px 16px;
  padding: 14px;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  background:#fff;
  animation: rise .25s ease both;
}
.item + .item{ margin-top: 10px; }

.item-img{
  grid-area: img;
  width: 96px; height: 96px;
  border-radius: 12px; object-fit: cover; background: #f5f5f5;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
}
.item-info{ grid-area: info; }
.item-title{ font-weight: 700; margin:0 0 2px; letter-spacing:.2px; }
.item-meta{ color:#666; font-size:.9rem; }
.item-price{ color:#111; font-weight:600; }

.item-qty{ grid-area: qty; display:flex; align-items:center; gap:8px; }
.qty-btn{
  width: 36px; height: 36px; border-radius: 10px;
  border: 1px solid rgba(0,0,0,.12);
  background: #fff; font-size: 18px; line-height: 1;
  transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
}
.qty-btn:hover{ background:#f7f7f7; box-shadow:0 4px 10px rgba(0,0,0,.05); }
.qty-btn:active{ transform: scale(.97); }
.qty-btn:disabled{ opacity:.5; cursor:not-allowed; }

.qty-input{
  width: 48px; text-align: center; border: 1px solid rgba(0,0,0,.12);
  height: 36px; border-radius: 10px; background: #fff;
}
.qty-bounce{ animation: bounce .28s ease; }

.item-actions{ grid-area: act; display:flex; gap:10px; align-items:center; }
.item-actions .btn-remove{
  border:none; background:transparent; color: var(--danger); font-weight:600;
}
.item-actions .fav{
  border:none; background:transparent; color:#666; transition: transform .12s ease, color .2s ease;
}
.item-actions .fav:hover{ transform: scale(1.1); color: var(--brand-accent-2); }
.item-actions .fav.active{ color: var(--brand-accent); transform: scale(1.15); }

/* ---------- Recomendaciones ---------- */
.reco-card{ min-height:100%; overflow: hidden; }
.reco-img{
  height:140px; background:#f6f2ef; border-top-left-radius:12px; border-top-right-radius:12px;
  position: relative;
}
.reco-img img{ opacity:0; transition: opacity .25s ease; }
.reco-img img.loaded{ opacity:1; }
.reco-img.skeleton{
  background: #eee;
  background-image: linear-gradient(90deg, #eee 0px, #f6f6f6 40px, #eee 80px);
  background-size: 600px 100%;
  animation: shimmer 1.2s infinite linear;
}

/* ---------- Badges de pago ---------- */
.pay-badge{
  padding:.25rem .5rem; border:1px solid rgba(0,0,0,.2); border-radius:6px; font-size:.75rem; background:#fff;
}

/* ---------- Botones ---------- */
.btn-dark{
  position: relative; overflow: hidden;
}
.btn-dark::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(120px 120px at var(--x, 50%) var(--y, 50%), rgba(255,255,255,.18), transparent 60%);
  opacity:0; transition: opacity .25s ease;
}
.btn-dark:active::after{ opacity:1; }

/* ---------- Focus accesible ---------- */
button:focus-visible,
a:focus-visible,
.qty-input:focus-visible,
input:focus-visible{
  outline: 3px solid rgba(122,74,41,.35);
  outline-offset: 2px;
}

/* ---------- Estado vac칤o ---------- */
#estadoVacio .btn{ animation: pulse 2.2s ease infinite; }

/* ---------- Utilidades ---------- */
.d-none{ display: none !important; }
.opacity-75{ opacity:.75; }

/* Peque침os textos */
#hintMostrando{ font-size:.95rem; }

/* Micro-feedback para errores (cupon/CP) */
.form-text.error{ color: var(--danger); }
.form-text.ok{ color: var(--ok); }

/* === Animaci칩n continua para la barra de progreso === */
.progress-bar {
  background-image: linear-gradient(
    90deg,
    var(--bs-primary) 0%,
    #4fa3ff 25%,
    var(--bs-primary) 50%,
    #4fa3ff 75%,
    var(--bs-primary) 100%
  );
  background-size: 200% 100%;
  animation: fillFlow 3s linear infinite;
}

/* Movimiento de izquierda a derecha tipo oleaje */
@keyframes fillFlow {
  0% { background-position: 0% 0; }
  100% { background-position: -200% 0; }
}